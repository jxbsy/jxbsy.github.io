import{_ as c}from"./lodash.fe924583.js";import{M as a}from"./mock.7c176f85.js";import{s as d,e as m}from"./apiResult.09ec0eb2.js";const h=e=>new Promise((s,r)=>{setTimeout(()=>{let t=o();t=t.filter(g=>g.xmmc.indexOf(e.xmmc)>=0);const n=t.length,i=(e.current-1)*e.size,f=i+e.size,l={current:e.current,size:e.size,total:n,records:t.slice(i,f)};s(d(l))},500)}),w=e=>new Promise((s,r)=>{setTimeout(()=>{const t=c.find(o(),n=>n.id===e);s(d(t))},500)}),B=e=>new Promise((s,r)=>{setTimeout(()=>{let t=o();if(y(t,null,e.xmmc)){r(m("\u9879\u76EE\u540D\u79F0\u91CD\u590D\uFF0C\u8BF7\u66F4\u6362\u3002"));return}t.push({id:new Date().getTime(),...e}),u(t),s()},500)}),P=()=>new Promise((e,s)=>{let r=o(),t=a.Random,n=new Date().getTime();for(let i=0;i<50;i++)r.push({id:--n,phone:t.integer(130,139)+t.string("number",8),name:t.cname(),gender:t.pick("\u7537","\u5973","\u4FDD\u5BC6"),birthday:t.date("yyyy-MM-dd"),address:t.county(!0)});u(r),e()}),p=e=>new Promise((s,r)=>{let t=o();if(y(t,e.id,e.phone)){r(m("\u624B\u673A\u53F7\u91CD\u590D\uFF0C\u8BF7\u66F4\u6362\u3002"));return}const n=c.findIndex(t,i=>i.id===e.id);n>=0&&(t[n]=e,u(t)),s()}),S=e=>new Promise((s,r)=>{let t=o();c.remove(t,n=>n.id===e),u(t),s()});function y(e,s,r){return r?c.findIndex(e,t=>s?t.id!==s&&t.phone===r:t.phone===r)>=0:!1}function o(){let e=JSON.parse(sessionStorage.getItem("bsyList"));return e||(e=[]),e}function u(e){e&&sessionStorage.setItem("bsyList",JSON.stringify(e))}export{B as a,h as b,P as c,w as g,S as r,p as u};
